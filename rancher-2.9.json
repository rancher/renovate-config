{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["github>rancher/renovate-config#release"],
  "vulnerabilityAlerts": { "enabled": true },
  "osvVulnerabilityAlerts": true,
  "packageRules": [
    {
      "matchUpdateTypes": ["major","minor","patch","pin","digest","pinDigest"],
      "enabled": false
    },
    {
      "matchPackageNames": [
        "golang",
        "go",
        "registry.suse.com/bci/golang",
        "registry.opensuse.org/opensuse/bci/golang"
      ],
      "matchUpdateTypes": ["patch"],
      "enabled": true,
      "allowedVersions": "<1.24.0"
    },
    {
      "matchDatasources": ["golang-version"],
      "matchUpdateTypes": ["patch"],
      "enabled": true,
      "allowedVersions": "<1.24.0"
    },
    {
      "matchManagers": ["gomod", "regex", "dockerfile"],
      "matchPackageNames": [
        "rancher/kubectl",
        "kubernetes/kubernetes",
        "k8s.io/kubernetes"
      ],
      "matchUpdateTypes": ["patch"],
      "enabled": true,
      "allowedVersions": "<1.31.0"
    },
    {
      "matchManagers": ["gomod"],
      "matchPackageNames": [
        "!k8s.io/kubernetes",
        "k8s.io/**"
      ],
      "matchUpdateTypes": ["patch"],
      "enabled": true,
      "allowedVersions": "<0.31.0",
      "semanticCommitType": "chore",
      "semanticCommitScope": "deps",
      "commitMessageAction": "update",
      "commitMessageTopic": "k8s dependencies",
      "commitMessageExtra": "to {{#if newValue}}{{newValue}}{{else}}new patch version{{/if}}"
    },
    {
      "description": "Disable major bumps",
      "matchPackageNames": ["rancher/kuberlr-kubectl"],
      "matchUpdateTypes": ["minor","patch"],
      "enabled": true
    },
    {
      "description": "Disable vulnerability alerts for all k8s and golang modules to prevent non-patch level bumps",
      "matchPackageNames": [
        "golang",
        "go",
        "registry.suse.com/bci/golang",
        "registry.opensuse.org/opensuse/bci/golang",
        "rancher/kubectl",
        "kubernetes/kubernetes",
        "k8s.io/**"
      ],
      "vulnerabilityAlerts": { "enabled": false }
    }
  ]
}
